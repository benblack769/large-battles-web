<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" crossorigin="anonymous"></script>

<body>

<p>Count numbers: <output id="result"></output></p>
<button onclick="startWorker()">Start Worker</button>
<button onclick="stopWorker()">Stop Worker</button>

<script>
var w;

function startWorker() {
    // Build a worker from an anonymous function body
    $.get("demo_workers.js",function(data){
        console.log(data)
        var blobURL = URL.createObjectURL( new Blob([ ]))
        //worker = new Worker( blobURL );

        // Won't be needing this anymore
        //URL.revokeObjectURL( blobURL );

        if(typeof(Worker) !== "undefined") {
            for(var i = 0; i < 1; i++){
                if(typeof(w) == "undefined") {
                    w = new Worker("demo_workers.js");
                }
                w.postMessage("hi there web worker!")
                w.onmessage = function(event) {
                    document.getElementById("result").innerHTML = event.data;
                };
            }
        } else {
            document.getElementById("result").innerHTML = "Sorry! No Web Worker support.";
        }
    },"text");

}

function stopWorker() {
    w.terminate();
    w = undefined;
}
</script>

</body>
</html>
